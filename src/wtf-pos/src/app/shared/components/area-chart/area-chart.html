<svg
  [attr.viewBox]="'0 0 ' + width + ' ' + height"
  class="block h-full w-full"
  preserveAspectRatio="xMidYMid meet"
>
  <defs>
    <linearGradient [attr.id]="gradientId" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" [attr.stop-color]="color()" stop-opacity="0.25" />
      <stop offset="100%" [attr.stop-color]="color()" stop-opacity="0.03" />
    </linearGradient>
  </defs>

  <!-- Grid lines -->
  @for (line of gridLines(); track line.y) {
    <line
      [attr.x1]="padding.left"
      [attr.y1]="line.y"
      [attr.x2]="width - padding.right"
      [attr.y2]="line.y"
      stroke="#e5e7eb"
      stroke-width="0.5"
      stroke-dasharray="3,3"
    />
    <text
      [attr.x]="padding.left - 6"
      [attr.y]="line.y + 3"
      text-anchor="end"
      class="fill-gray-400"
      font-size="9"
    >
      {{ line.label }}
    </text>
  }

  <!-- Area fill -->
  @if (areaPath()) {
    <path
      [attr.d]="areaPath()"
      [attr.fill]="'url(#' + gradientId + ')'"
    />
  }

  <!-- Line -->
  @if (linePath()) {
    <path
      [attr.d]="linePath()"
      fill="none"
      [attr.stroke]="color()"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  }

  <!-- Data points -->
  @if (points().length <= 31) {
    @for (pt of points(); track pt.x) {
      <circle
        [attr.cx]="pt.x"
        [attr.cy]="pt.y"
        r="3"
        [attr.fill]="color()"
        opacity="0.9"
      >
        <title>{{ pt.label }}: PHP {{ pt.value.toFixed(2) }}</title>
      </circle>
    }
  }

  <!-- X-axis labels -->
  @for (pt of axisLabels(); track pt.x) {
    <text
      [attr.x]="pt.x"
      [attr.y]="height - 4"
      text-anchor="middle"
      class="fill-gray-500"
      font-size="8"
    >
      {{ pt.label }}
    </text>
  }
</svg>



