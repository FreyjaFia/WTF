<div class="flex flex-col items-center gap-3">
  <svg viewBox="0 0 120 120" class="h-28 w-28 sm:h-32 sm:w-32">
    @for (arc of arcs(); track arc.label) {
      <circle
        cx="60"
        cy="60"
        r="45"
        fill="none"
        [attr.stroke]="arc.color"
        stroke-width="18"
        [attr.stroke-dasharray]="arc.dashArray"
        [attr.stroke-dashoffset]="arc.dashOffset"
        stroke-linecap="round"
        class="transition-all duration-500"
      >
        <title>{{ arc.label }}: PHP {{ arc.value.toFixed(2) }} ({{ arc.percent }}%)</title>
      </circle>
    }
    <!-- Center text -->
    <text
      x="60"
      y="56"
      text-anchor="middle"
      class="fill-gray-900"
      font-size="14"
      font-weight="700"
      style="font-family: 'Plus Jakarta Sans', sans-serif"
    >
      {{ totalLabel() }}
    </text>
    <text
      x="60"
      y="70"
      text-anchor="middle"
      class="fill-gray-400"
      font-size="8"
      font-weight="500"
    >
      total
    </text>
  </svg>

  <!-- Legend -->
  <div class="flex flex-wrap justify-center gap-x-4 gap-y-1">
    @for (arc of arcs(); track arc.label) {
      <div class="flex items-center gap-1.5">
        <div class="h-2.5 w-2.5 rounded-full" [style.background-color]="arc.color"></div>
        <span class="text-xs text-gray-600">{{ arc.label }}</span>
        <span class="text-xs font-semibold text-gray-900">{{ arc.percent }}%</span>
      </div>
    }
  </div>
</div>



