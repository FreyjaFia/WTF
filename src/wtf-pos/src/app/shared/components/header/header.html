@if (isLoadingMe()) {
  <div class="fixed inset-0 z-100 flex items-center justify-center bg-white/85 backdrop-blur-sm">
    <div class="flex items-center gap-3 rounded-xl bg-white px-5 py-3 shadow-lg">
      <span class="loading loading-spinner loading-md text-[#047857]"></span>
      <span class="text-sm font-medium text-gray-700">Loading profile...</span>
    </div>
  </div>
}
<div class="navbar shrink-0 border-b border-gray-200 bg-white px-3 shadow-md sm:px-6">
  <div class="flex-1">
    <a class="flex items-center gap-2 text-2xl font-bold tracking-tight">
      <span class="text-neutral">WTF</span>
      <span class="text-xs font-normal tracking-wider text-gray-500 uppercase">POS</span>
      <span class="text-[10px] font-semibold tracking-wide text-gray-400">v{{ appVersion }}</span>
    </a>
  </div>
  <div class="flex items-center gap-2 sm:gap-4">
    <div class="text-right">
      <div class="text-sm font-semibold text-gray-800">{{ userFullName }}</div>
      <div class="flex items-center justify-end gap-2 text-xs text-gray-500">
        <span>{{ userRoleLabel }}</span>
        <span class="inline-flex items-center gap-1.5">
          <span [class.text-emerald-700]="isOnline()" [class.text-amber-700]="!isOnline()">{{
            isOnline() ? 'Online' : 'Offline'
          }}</span>
        </span>
      </div>
      <div class="text-[10px] text-gray-400 sm:text-xs">
        {{ now() | date: 'EEE, MMM d, y • h:mm:ss a' }}
      </div>
    </div>

    <div class="dropdown dropdown-end z-50">
      <div
        tabindex="0"
        role="button"
        class="avatar cursor-pointer rounded-full p-0.5 ring-2 ring-transparent transition-all hover:ring-[#047857]/30 active:scale-95"
      >
        <div class="w-10 rounded-full">
          @if (imageUrl) {
            <img alt="User avatar" [src]="imageUrl" />
          } @else {
            <app-avatar [label]="userFullName" [size]="36"></app-avatar>
          }
        </div>
      </div>
      <div
        tabindex="-1"
        class="dropdown-content right-0 z-10 mt-3 w-48 overflow-hidden rounded-xl border border-gray-200 bg-white shadow-xl"
      >
        <div class="p-1.5">
          <a
            role="button"
            tabindex="0"
            class="flex w-full cursor-pointer items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-100 active:bg-gray-200"
            (click)="goToMyProfile($event)"
            (keydown.enter)="goToMyProfile($event)"
            (keydown.space)="goToMyProfile($event)"
          >
            <app-icon name="icon-user" [class]="'h-4.5 w-4.5 text-gray-500'" />
            My Profile
          </a>

          <div class="my-1 border-t border-gray-100" aria-hidden="true"></div>

          <a
            role="button"
            tabindex="0"
            class="flex w-full cursor-pointer items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-red-600 transition-colors hover:bg-red-50 active:bg-red-100"
            (click)="logout()"
            (keydown.enter)="logout()"
            (keydown.space)="logout()"
          >
            <app-icon name="icon-logout" [class]="'h-4.5 w-4.5 text-red-500'" />
            Logout
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

