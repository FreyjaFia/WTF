<!-- Pull indicator (only visible on mobile during pull) -->
<div
  class="flex items-center justify-center overflow-hidden transition-[height] duration-200 ease-out"
  [style.height.px]="indicatorHeight()"
>
  @if (indicatorHeight() > 0) {
    <div
      class="flex items-center gap-2 text-sm text-gray-500"
      [class.text-[#047857]]="isPastThreshold()"
    >
      @if (refreshing()) {
        <span class="loading loading-spinner loading-sm"></span>
        <span>Refreshing...</span>
      } @else {
        <svg
          class="h-5 w-5 transition-transform duration-200"
          [style.transform]="'rotate(' + pullRotation() + 'deg)'"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
        </svg>
        <span>{{ isPastThreshold() ? 'Release to refresh' : 'Pull down to refresh' }}</span>
      }
    </div>
  }
</div>

<!-- Scrollable content area -->
<div
  #scrollContainer
  class="min-h-0 flex-1 overflow-y-auto pb-4 pr-2"
  (touchstart)="onTouchStart($event)"
  (touchmove)="onTouchMove($event)"
  (touchend)="onTouchEnd()"
>
  <ng-content />
</div>
