<div class="flex h-full w-full flex-col rounded-t-2xl bg-white lg:flex-row">
  <!-- Mobile Navigation -->
  <div class="flex shrink-0 flex-col border-b border-gray-200 bg-white pb-4 lg:hidden">
    <h2 class="mb-3 text-xl font-bold text-gray-900">Management</h2>
    <nav class="flex items-stretch gap-1.5 rounded-xl bg-gray-100 p-1.5">
      <a
        routerLink="products"
        routerLinkActive="bg-green-50 text-emerald-700"
        [routerLinkActiveOptions]="{ exact: false }"
        class="flex min-w-0 flex-1 flex-col items-center justify-center gap-1 rounded-lg px-2 pt-2 pb-2.5 text-[10px] leading-tight font-normal text-gray-500 transition-colors"
        [class.text-emerald-700]="isActive('products')"
        [class.bg-emerald-100]="isActive('products')"
      >
        <app-icon name="icon-cart" [class]="'h-4 w-4 shrink-0'" [fill]="'currentColor'"></app-icon>
        Products
      </a>
      @if (canReadCustomers()) {
        <a
          routerLink="customers"
          routerLinkActive="bg-green-50 text-emerald-700"
          [routerLinkActiveOptions]="{ exact: false }"
          class="flex min-w-0 flex-1 flex-col items-center justify-center gap-1 rounded-lg px-2 pt-2 pb-2.5 text-[10px] leading-tight font-normal text-gray-500 transition-colors"
          [class.text-emerald-700]="isActive('customers')"
          [class.bg-emerald-100]="isActive('customers')"
        >
          <app-icon
            name="icon-people"
            [class]="'h-4 w-4 shrink-0'"
            [fill]="'currentColor'"
          ></app-icon>
          Customers
        </a>
      }
      <a
        routerLink="users"
        routerLinkActive="bg-green-50 text-emerald-700"
        [routerLinkActiveOptions]="{ exact: false }"
        class="flex min-w-0 flex-1 flex-col items-center justify-center gap-1 rounded-lg px-2 pt-2 pb-2.5 text-[10px] leading-tight font-normal text-gray-500 transition-colors"
        [class.text-emerald-700]="isActive('users')"
        [class.bg-emerald-100]="isActive('users')"
      >
        <app-icon name="icon-user" [class]="'h-4 w-4 shrink-0'" [fill]="'currentColor'"></app-icon>
        Users
      </a>
      @if (canAccessReports()) {
        <a
          routerLink="reports"
          routerLinkActive="bg-green-50 text-emerald-700"
          [routerLinkActiveOptions]="{ exact: false }"
          class="flex min-w-0 flex-1 flex-col items-center justify-center gap-1 rounded-lg px-2 pt-2 pb-2.5 text-[10px] leading-tight font-normal text-gray-500 transition-colors"
          [class.text-emerald-700]="isActive('reports')"
          [class.bg-emerald-100]="isActive('reports')"
          aria-label="Reports"
        >
          <app-icon
            name="icon-trending-up"
            [class]="'h-4 w-4 shrink-0'"
            [fill]="'currentColor'"
          ></app-icon>
          Reports
        </a>
      }
      @if (canAccessAuditLogs()) {
        <a
          routerLink="audit-logs"
          routerLinkActive="bg-green-50 text-emerald-700"
          [routerLinkActiveOptions]="{ exact: false }"
          class="flex min-w-0 flex-1 flex-col items-center justify-center gap-1 rounded-lg px-2 pt-2 pb-2.5 text-[10px] leading-tight font-normal text-gray-500 transition-colors"
          [class.text-emerald-700]="isActive('audit-logs')"
          [class.bg-emerald-100]="isActive('audit-logs')"
          aria-label="Audit Logs"
        >
          <app-icon
            name="icon-audit-logs"
            [class]="'h-4 w-4 shrink-0'"
            [fill]="'currentColor'"
          ></app-icon>
          Audit
        </a>
      }
      @if (canAccessSchemaScriptHistory()) {
        <a
          routerLink="schema-scripts"
          routerLinkActive="bg-green-50 text-emerald-700"
          [routerLinkActiveOptions]="{ exact: false }"
          class="flex min-w-0 flex-1 flex-col items-center justify-center gap-1 rounded-lg px-2 pt-2 pb-2.5 text-[10px] leading-tight font-normal text-gray-500 transition-colors"
          [class.text-emerald-700]="isActive('schema-scripts')"
          [class.bg-emerald-100]="isActive('schema-scripts')"
          aria-label="Schema Scripts"
        >
          <app-icon
            name="icon-schema-scripts"
            [class]="'h-4 w-4 shrink-0'"
            [fill]="'currentColor'"
          ></app-icon>
          Schema
        </a>
      }
    </nav>
  </div>

  <!-- Desktop Sidebar Navigation -->
  <div
    class="hidden shrink-0 flex-col border-r border-gray-200 bg-white transition-all duration-400 ease-[cubic-bezier(0.175,0.885,0.32,1.275)] lg:flex"
    [class.w-64]="!isSidebarCollapsed()"
    [class.w-20]="isSidebarCollapsed()"
  >
    <div
      class="mb-6 flex items-center pr-4"
      [class.justify-between]="!isSidebarCollapsed()"
      [class.justify-center]="isSidebarCollapsed()"
    >
      @if (!isSidebarCollapsed()) {
        <h2 class="text-2xl font-bold whitespace-nowrap text-gray-900">Management</h2>
      }
      <button
        type="button"
        class="tooltip z-50 cursor-pointer rounded-lg p-2 transition-all duration-400 ease-[cubic-bezier(0.175,0.885,0.32,1.275)] hover:bg-gray-100 active:scale-95"
        [class.tooltip-right]="isSidebarCollapsed()"
        [class.tooltip-bottom]="!isSidebarCollapsed()"
        (click)="toggleSidebar()"
        [attr.aria-label]="isSidebarCollapsed() ? 'Expand sidebar' : 'Collapse sidebar'"
        [attr.data-tip]="isSidebarCollapsed() ? 'Expand' : 'Collapse'"
      >
        <app-icon
          [name]="isSidebarCollapsed() ? 'icon-chevrons-right' : 'icon-chevrons-left'"
          [class]="'h-5 w-5 text-gray-600 transition-colors hover:text-gray-900'"
          [fill]="'currentColor'"
        ></app-icon>
      </button>
    </div>

    <nav class="space-y-2">
      <a
        routerLink="products"
        routerLinkActive="bg-green-50"
        [routerLinkActiveOptions]="{ exact: false }"
        class="tooltip mr-4 flex items-center rounded-lg px-4 py-3 whitespace-nowrap text-gray-700 transition-all duration-400 ease-[cubic-bezier(0.175,0.885,0.32,1.275)] hover:bg-gray-50"
        [class.justify-center]="isSidebarCollapsed()"
        [class.gap-3]="!isSidebarCollapsed()"
        [class.tooltip-right]="isSidebarCollapsed()"
        [class.tooltip-bottom]="!isSidebarCollapsed()"
        [class.z-50]="isSidebarCollapsed()"
        [attr.data-tip]="'Products'"
        [class.text-emerald-700]="isActive('products')"
        [class.bg-green-50]="isActive('products')"
      >
        <app-icon name="icon-cart" [class]="'h-5 w-5 shrink-0'"></app-icon>
        @if (!isSidebarCollapsed()) {
          <span class="font-medium">Products</span>
        }
      </a>

      @if (canReadCustomers()) {
        <a
          routerLink="customers"
          routerLinkActive="bg-green-50"
          [routerLinkActiveOptions]="{ exact: false }"
          class="tooltip mr-4 flex items-center rounded-lg px-4 py-3 whitespace-nowrap text-gray-700 transition-all duration-400 ease-[cubic-bezier(0.175,0.885,0.32,1.275)] hover:bg-gray-50"
          [class.justify-center]="isSidebarCollapsed()"
          [class.gap-3]="!isSidebarCollapsed()"
          [class.tooltip-right]="isSidebarCollapsed()"
          [class.tooltip-bottom]="!isSidebarCollapsed()"
          [class.z-50]="isSidebarCollapsed()"
          [attr.data-tip]="'Customers'"
          [class.text-emerald-700]="isActive('customers')"
          [class.bg-green-50]="isActive('customers')"
        >
          <app-icon name="icon-people" [class]="'h-5 w-5 shrink-0'"></app-icon>
          @if (!isSidebarCollapsed()) {
            <span class="font-medium">Customers</span>
          }
        </a>
      }

      <a
        routerLink="users"
        routerLinkActive="bg-green-50"
        [routerLinkActiveOptions]="{ exact: false }"
        class="tooltip mr-4 flex items-center rounded-lg px-4 py-3 whitespace-nowrap text-gray-700 transition-all duration-400 ease-[cubic-bezier(0.175,0.885,0.32,1.275)] hover:bg-gray-50"
        [class.justify-center]="isSidebarCollapsed()"
        [class.gap-3]="!isSidebarCollapsed()"
        [class.tooltip-right]="isSidebarCollapsed()"
        [class.tooltip-bottom]="!isSidebarCollapsed()"
        [class.z-50]="isSidebarCollapsed()"
        [attr.data-tip]="'Users'"
        [class.text-emerald-700]="isActive('users')"
        [class.bg-green-50]="isActive('users')"
      >
        <app-icon name="icon-user" [class]="'h-5 w-5 shrink-0'"></app-icon>
        @if (!isSidebarCollapsed()) {
          <span class="font-medium">Users</span>
        }
      </a>

      @if (canAccessReports()) {
        <a
          routerLink="reports"
          routerLinkActive="bg-green-50"
          [routerLinkActiveOptions]="{ exact: false }"
          class="tooltip mr-4 flex items-center rounded-lg px-4 py-3 whitespace-nowrap text-gray-700 transition-all duration-400 ease-[cubic-bezier(0.175,0.885,0.32,1.275)] hover:bg-gray-50"
          [class.justify-center]="isSidebarCollapsed()"
          [class.gap-3]="!isSidebarCollapsed()"
          [class.tooltip-right]="isSidebarCollapsed()"
          [class.tooltip-bottom]="!isSidebarCollapsed()"
          [class.z-50]="isSidebarCollapsed()"
          [attr.data-tip]="'Reports'"
          [class.text-emerald-700]="isActive('reports')"
          [class.bg-green-50]="isActive('reports')"
        >
          <app-icon name="icon-trending-up" [class]="'h-5 w-5 shrink-0'"></app-icon>
          @if (!isSidebarCollapsed()) {
            <span class="font-medium">Reports</span>
          }
        </a>
      }

      @if (canAccessAuditLogs()) {
        <a
          routerLink="audit-logs"
          routerLinkActive="bg-green-50"
          [routerLinkActiveOptions]="{ exact: false }"
          class="tooltip mr-4 flex items-center rounded-lg px-4 py-3 whitespace-nowrap text-gray-700 transition-all duration-400 ease-[cubic-bezier(0.175,0.885,0.32,1.275)] hover:bg-gray-50"
          [class.justify-center]="isSidebarCollapsed()"
          [class.gap-3]="!isSidebarCollapsed()"
          [class.tooltip-right]="isSidebarCollapsed()"
          [class.tooltip-bottom]="!isSidebarCollapsed()"
          [class.z-50]="isSidebarCollapsed()"
          [attr.data-tip]="'Audit Logs'"
          [class.text-emerald-700]="isActive('audit-logs')"
          [class.bg-green-50]="isActive('audit-logs')"
        >
          <app-icon name="icon-audit-logs" [class]="'h-5 w-5 shrink-0'"></app-icon>
          @if (!isSidebarCollapsed()) {
            <span class="font-medium">Audit Logs</span>
          }
        </a>
      }

      @if (canAccessSchemaScriptHistory()) {
        <a
          routerLink="schema-scripts"
          routerLinkActive="bg-green-50"
          [routerLinkActiveOptions]="{ exact: false }"
          class="tooltip mr-4 flex items-center rounded-lg px-4 py-3 whitespace-nowrap text-gray-700 transition-all duration-400 ease-[cubic-bezier(0.175,0.885,0.32,1.275)] hover:bg-gray-50"
          [class.justify-center]="isSidebarCollapsed()"
          [class.gap-3]="!isSidebarCollapsed()"
          [class.tooltip-right]="isSidebarCollapsed()"
          [class.tooltip-bottom]="!isSidebarCollapsed()"
          [class.z-50]="isSidebarCollapsed()"
          [attr.data-tip]="'Schema Scripts'"
          [class.text-emerald-700]="isActive('schema-scripts')"
          [class.bg-green-50]="isActive('schema-scripts')"
        >
          <app-icon name="icon-schema-scripts" [class]="'h-5 w-5 shrink-0'"></app-icon>
          @if (!isSidebarCollapsed()) {
            <span class="font-medium">Schema Scripts</span>
          }
        </a>
      }
    </nav>
  </div>

  <!-- Content Area -->
  <div class="flex h-full min-h-0 flex-1 flex-col pt-4 lg:pt-0">
    <router-outlet />
  </div>
</div>
