@page "/lp"
@page "/lp/{Token?}"
@layout NullLayout

@if (RedirectToLoyalty != null) {
    <h2 class="rewards-title mb-4">Your Loyalty Rewards</h2>

    <div class="loyalty-card-container">
        @if (IsLoading)
        {
            <p class="loading">Loading your points...</p>
        }
        else if (LoyaltyPoints is not null)
        {
            <div class="points-info mb-4">
                <p>Hi <strong>@LoyaltyPoints.FullName</strong>!</p>
                <p>You have <span class="points">@LoyaltyPoints.Points</span> point(s).</p>

                @if (RemainingPoints > 0)
                {
                    <p class="progress-msg">Get <strong>@RemainingPoints more drinks</strong> to earn a free coffee! ☕</p>
                }
                else
                {
                    <p class="progress-msg success">Congratulations! You earned a free coffee! ☕</p>
                }
            </div>

            <img src="@GetCardImage()" alt="Loyalty Card" class="loyalty-card" />
        }
        else
        {
            <p class="no-points">No loyalty points found.</p>
        } 
    </div>
}
